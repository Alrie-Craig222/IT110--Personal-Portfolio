{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport { createVNode as _createVNode, mergeProps as _mergeProps, resolveDirective as _resolveDirective } from \"vue\";\nimport { Transition } from 'vue';\nimport { acceleratedEasing, deceleratedEasing, defineComponent, nullifyTransforms, standardEasing } from \"../../util/index.mjs\";\nexport const VDialogTransition = defineComponent({\n  name: 'VDialogTransition',\n  props: {\n    target: Object\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const functions = {\n      onBeforeEnter(el) {\n        el.style.pointerEvents = 'none';\n        el.style.visibility = 'hidden';\n      },\n      async onEnter(el, done) {\n        var _getChildren;\n        await new Promise(resolve => requestAnimationFrame(resolve));\n        await new Promise(resolve => requestAnimationFrame(resolve));\n        el.style.visibility = '';\n        const {\n          x,\n          y,\n          sx,\n          sy,\n          speed\n        } = getDimensions(props.target, el);\n        const animation = el.animate([{\n          transform: `translate(${x}px, ${y}px) scale(${sx}, ${sy})`,\n          opacity: 0\n        }, {\n          transform: ''\n        }], {\n          duration: 225 * speed,\n          easing: deceleratedEasing\n        });\n        (_getChildren = getChildren(el)) == null ? void 0 : _getChildren.forEach(el => {\n          el.animate([{\n            opacity: 0\n          }, {\n            opacity: 0,\n            offset: 0.33\n          }, {\n            opacity: 1\n          }], {\n            duration: 225 * 2 * speed,\n            easing: standardEasing\n          });\n        });\n        animation.finished.then(() => done());\n      },\n      onAfterEnter(el) {\n        el.style.removeProperty('pointer-events');\n      },\n      onBeforeLeave(el) {\n        el.style.pointerEvents = 'none';\n      },\n      async onLeave(el, done) {\n        var _getChildren2;\n        await new Promise(resolve => requestAnimationFrame(resolve));\n        const {\n          x,\n          y,\n          sx,\n          sy,\n          speed\n        } = getDimensions(props.target, el);\n        const animation = el.animate([{\n          transform: ''\n        }, {\n          transform: `translate(${x}px, ${y}px) scale(${sx}, ${sy})`,\n          opacity: 0\n        }], {\n          duration: 125 * speed,\n          easing: acceleratedEasing\n        });\n        animation.finished.then(() => done());\n        (_getChildren2 = getChildren(el)) == null ? void 0 : _getChildren2.forEach(el => {\n          el.animate([{}, {\n            opacity: 0,\n            offset: 0.2\n          }, {\n            opacity: 0\n          }], {\n            duration: 125 * 2 * speed,\n            easing: standardEasing\n          });\n        });\n      },\n      onAfterLeave(el) {\n        el.style.removeProperty('pointer-events');\n      }\n    };\n    return () => {\n      return props.target ? _createVNode(Transition, _mergeProps({\n        \"name\": \"dialog-transition\"\n      }, functions, {\n        \"css\": false\n      }), slots) : _createVNode(Transition, {\n        \"name\": \"dialog-transition\"\n      }, slots);\n    };\n  }\n});\n/** Animatable children (card, sheet, list) */\n\nfunction getChildren(el) {\n  var _el$querySelector;\n  const els = (_el$querySelector = el.querySelector(':scope > .v-card, :scope > .v-sheet, :scope > .v-list')) == null ? void 0 : _el$querySelector.children;\n  return els && [...els];\n}\nfunction getDimensions(target, el) {\n  const targetBox = target.getBoundingClientRect();\n  const elBox = nullifyTransforms(el);\n  const [originX, originY] = getComputedStyle(el).transformOrigin.split(' ').map(v => parseFloat(v));\n  const [anchorSide, anchorOffset] = getComputedStyle(el).getPropertyValue('--v-overlay-anchor-origin').split(' ');\n  let offsetX = targetBox.left + targetBox.width / 2;\n  if (anchorSide === 'left' || anchorOffset === 'left') {\n    offsetX -= targetBox.width / 2;\n  } else if (anchorSide === 'right' || anchorOffset === 'right') {\n    offsetX += targetBox.width / 2;\n  }\n  let offsetY = targetBox.top + targetBox.height / 2;\n  if (anchorSide === 'top' || anchorOffset === 'top') {\n    offsetY -= targetBox.height / 2;\n  } else if (anchorSide === 'bottom' || anchorOffset === 'bottom') {\n    offsetY += targetBox.height / 2;\n  }\n  const tsx = targetBox.width / elBox.width;\n  const tsy = targetBox.height / elBox.height;\n  const maxs = Math.max(1, tsx, tsy);\n  const sx = tsx / maxs;\n  const sy = tsy / maxs; // Animate elements larger than 12% of the screen area up to 1.5x slower\n\n  const asa = elBox.width * elBox.height / (window.innerWidth * window.innerHeight);\n  const speed = asa > 0.12 ? Math.min(1.5, (asa - 0.12) * 10 + 1) : 1;\n  return {\n    x: offsetX - (originX + elBox.left),\n    y: offsetY - (originY + elBox.top),\n    sx,\n    sy,\n    speed\n  };\n}","map":{"version":3,"mappings":";;;;AACA,SAASA,UAAT,QAA2B,KAA3B;SACSC,iB,EAAmBC,iB,EAAmBC,e,EAAiBC,iB,EAAmBC,c;AAEnF,OAAO,MAAMC,iBAAiB,GAAGH,eAAe,CAAC;EAC/CI,IAAI,EAAE,mBADyC;EAG/CC,KAAK,EAAE;IACLC,MAAM,EAAEC;EADH,CAHwC;EAO/CC,KAAKA,CAAEH,KAAF,QAAoB;IAAA,IAAX;MAAEI;IAAF,CAAW;IACvB,MAAMC,SAAS,GAAG;MAChBC,aAAaA,CAAEC,EAAF,EAAe;QACzBA,EAAD,CAAoBC,KAApB,CAA0BC,aAA1B,GAA0C,MAA1C;QACEF,EAAD,CAAoBC,KAApB,CAA0BE,UAA1B,GAAuC,QAAvC;MACF,CAJe;MAKhB,MAAMC,OAANA,CAAeJ,EAAf,EAA4BK,IAA5B,EAA8C;QAAA;QAC5C,MAAM,IAAIC,OAAJ,CAAYC,OAAO,IAAIC,qBAAqB,CAACD,OAAD,CAA5C,CAAN;QACA,MAAM,IAAID,OAAJ,CAAYC,OAAO,IAAIC,qBAAqB,CAACD,OAAD,CAA5C,CAAN;QACEP,EAAD,CAAoBC,KAApB,CAA0BE,UAA1B,GAAuC,EAAvC;QAED,MAAM;UAAEM,CAAF;UAAKC,CAAL;UAAQC,EAAR;UAAYC,EAAZ;UAAgBC;QAAhB,IAA0BC,aAAa,CAACrB,KAAK,CAACC,MAAP,EAAgBM,EAAhB,CAA7C;QAEA,MAAMe,SAAS,GAAGf,EAAE,CAACgB,OAAH,CAAW,CAC3B;UAAEC,SAAS,EAAG,aAAYR,CAAE,OAAMC,CAAE,aAAYC,EAAG,KAAIC,EAAG,GAA1D;UAA8DM,OAAO,EAAE;QAAvE,CAD2B,EAE3B;UAAED,SAAS,EAAE;QAAb,CAF2B,CAAX,EAGf;UACDE,QAAQ,EAAE,MAAMN,KADf;UAEDO,MAAM,EAAEjC;QAFP,CAHe,CAAlB;QAOA,2BAAW,CAACa,EAAD,CAAX,kCAAiBqB,OAAjB,CAAyBrB,EAAE,IAAI;UAC7BA,EAAE,CAACgB,OAAH,CAAW,CACT;YAAEE,OAAO,EAAE;UAAX,CADS,EAET;YAAEA,OAAO,EAAE,CAAX;YAAcI,MAAM,EAAE;UAAtB,CAFS,EAGT;YAAEJ,OAAO,EAAE;UAAX,CAHS,CAAX,EAIG;YACDC,QAAQ,EAAE,MAAM,CAAN,GAAUN,KADnB;YAEDO,MAAM,EAAE9B;UAFP,CAJH;QAQD,CATD;QAUAyB,SAAS,CAACQ,QAAV,CAAmBC,IAAnB,CAAwB,MAAMnB,IAAI,EAAlC;MACD,CA9Be;MA+BhBoB,YAAYA,CAAEzB,EAAF,EAAe;QACxBA,EAAD,CAAoBC,KAApB,CAA0ByB,cAA1B,CAAyC,gBAAzC;MACD,CAjCe;MAkChBC,aAAaA,CAAE3B,EAAF,EAAe;QACzBA,EAAD,CAAoBC,KAApB,CAA0BC,aAA1B,GAA0C,MAA1C;MACD,CApCe;MAqChB,MAAM0B,OAANA,CAAe5B,EAAf,EAA4BK,IAA5B,EAA8C;QAAA;QAC5C,MAAM,IAAIC,OAAJ,CAAYC,OAAO,IAAIC,qBAAqB,CAACD,OAAD,CAA5C,CAAN;QAEA,MAAM;UAAEE,CAAF;UAAKC,CAAL;UAAQC,EAAR;UAAYC,EAAZ;UAAgBC;QAAhB,IAA0BC,aAAa,CAACrB,KAAK,CAACC,MAAP,EAAgBM,EAAhB,CAA7C;QAEA,MAAMe,SAAS,GAAGf,EAAE,CAACgB,OAAH,CAAW,CAC3B;UAAEC,SAAS,EAAE;QAAb,CAD2B,EAE3B;UAAEA,SAAS,EAAG,aAAYR,CAAE,OAAMC,CAAE,aAAYC,EAAG,KAAIC,EAAG,GAA1D;UAA8DM,OAAO,EAAE;QAAvE,CAF2B,CAAX,EAGf;UACDC,QAAQ,EAAE,MAAMN,KADf;UAEDO,MAAM,EAAElC;QAFP,CAHe,CAAlB;QAOA6B,SAAS,CAACQ,QAAV,CAAmBC,IAAnB,CAAwB,MAAMnB,IAAI,EAAlC;QACA,4BAAW,CAACL,EAAD,CAAX,mCAAiBqB,OAAjB,CAAyBrB,EAAE,IAAI;UAC7BA,EAAE,CAACgB,OAAH,CAAW,CACT,EADS,EAET;YAAEE,OAAO,EAAE,CAAX;YAAcI,MAAM,EAAE;UAAtB,CAFS,EAGT;YAAEJ,OAAO,EAAE;UAAX,CAHS,CAAX,EAIG;YACDC,QAAQ,EAAE,MAAM,CAAN,GAAUN,KADnB;YAEDO,MAAM,EAAE9B;UAFP,CAJH;QAQD,CATD;MAUD,CA5De;MA6DhBuC,YAAYA,CAAE7B,EAAF,EAAe;QACxBA,EAAD,CAAoBC,KAApB,CAA0ByB,cAA1B,CAAyC,gBAAzC;MACD;IA/De,CAAlB;IAkEA,OAAO,MAAM;MACX,OAAOjC,KAAK,CAACC,MAAN;QAAA,QAGI;MAHJ,GAIII,SAJJ;QAAA,OAKK;MALL,IAMSD,KANT;QAAA,QASc;MATd,GAS4CA,KAT5C,CAAP;IAUD,CAXD;EAYD;AAtF8C,CAAD,CAAzC;AAyFP;;AACA,SAASiC,WAATA,CAAsB9B,EAAtB,EAAmC;EAAA;EACjC,MAAM+B,GAAG,wBAAG/B,EAAE,CAACgC,aAAH,CAAiB,uDAAjB,CAAH,qBAAGC,kBAA2EC,QAAvF;EACA,OAAOH,GAAG,IAAI,CAAC,GAAGA,GAAJ,CAAd;AACD;AAED,SAASjB,aAATA,CAAwBpB,MAAxB,EAA6CM,EAA7C,EAA8D;EAC5D,MAAMmC,SAAS,GAAGzC,MAAM,CAAC0C,qBAAP,EAAlB;EACA,MAAMC,KAAK,GAAGhD,iBAAiB,CAACW,EAAD,CAA/B;EACA,MAAM,CAACsC,OAAD,EAAUC,OAAV,IAAqBC,gBAAgB,CAACxC,EAAD,CAAhB,CAAqByC,eAArB,CAAqCC,KAArC,CAA2C,GAA3C,EAAgDC,GAAhD,CAAoDC,CAAC,IAAIC,UAAU,CAACD,CAAD,CAAnE,CAA3B;EAEA,MAAM,CAACE,UAAD,EAAaC,YAAb,IAA6BP,gBAAgB,CAACxC,EAAD,CAAhB,CAAqBgD,gBAArB,CAAsC,2BAAtC,EAAmEN,KAAnE,CAAyE,GAAzE,CAAnC;EAEA,IAAIO,OAAO,GAAGd,SAAS,CAACe,IAAV,GAAiBf,SAAS,CAACgB,KAAV,GAAkB,CAAjD;EACA,IAAIL,UAAU,KAAK,MAAf,IAAyBC,YAAY,KAAK,MAA9C,EAAsD;IACpDE,OAAO,IAAId,SAAS,CAACgB,KAAV,GAAkB,CAA7B;EACD,CAFD,MAEO,IAAIL,UAAU,KAAK,OAAf,IAA0BC,YAAY,KAAK,OAA/C,EAAwD;IAC7DE,OAAO,IAAId,SAAS,CAACgB,KAAV,GAAkB,CAA7B;EACD;EAED,IAAIC,OAAO,GAAGjB,SAAS,CAACkB,GAAV,GAAgBlB,SAAS,CAACmB,MAAV,GAAmB,CAAjD;EACA,IAAIR,UAAU,KAAK,KAAf,IAAwBC,YAAY,KAAK,KAA7C,EAAoD;IAClDK,OAAO,IAAIjB,SAAS,CAACmB,MAAV,GAAmB,CAA9B;EACD,CAFD,MAEO,IAAIR,UAAU,KAAK,QAAf,IAA2BC,YAAY,KAAK,QAAhD,EAA0D;IAC/DK,OAAO,IAAIjB,SAAS,CAACmB,MAAV,GAAmB,CAA9B;EACD;EAED,MAAMC,GAAG,GAAGpB,SAAS,CAACgB,KAAV,GAAkBd,KAAK,CAACc,KAApC;EACA,MAAMK,GAAG,GAAGrB,SAAS,CAACmB,MAAV,GAAmBjB,KAAK,CAACiB,MAArC;EACA,MAAMG,IAAI,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYJ,GAAZ,EAAiBC,GAAjB,CAAb;EACA,MAAM7C,EAAE,GAAG4C,GAAG,GAAGE,IAAjB;EACA,MAAM7C,EAAE,GAAG4C,GAAG,GAAGC,IAAjB,CAzB4D,CA2B5D;;EACA,MAAMG,GAAG,GAAIvB,KAAK,CAACc,KAAN,GAAcd,KAAK,CAACiB,MAArB,IAAgCO,MAAM,CAACC,UAAP,GAAoBD,MAAM,CAACE,WAA3D,CAAZ;EACA,MAAMlD,KAAK,GAAG+C,GAAG,GAAG,IAAN,GACVF,IAAI,CAACM,GAAL,CAAS,GAAT,EAAc,CAACJ,GAAG,GAAG,IAAP,IAAe,EAAf,GAAoB,CAAlC,CADU,GAEV,CAFJ;EAIA,OAAO;IACLnD,CAAC,EAAEwC,OAAO,IAAIX,OAAO,GAAGD,KAAK,CAACa,IAApB,CADL;IAELxC,CAAC,EAAE0C,OAAO,IAAIb,OAAO,GAAGF,KAAK,CAACgB,GAApB,CAFL;IAGL1C,EAHK;IAILC,EAJK;IAKLC;EALK,CAAP;AAOD","names":["Transition","acceleratedEasing","deceleratedEasing","defineComponent","nullifyTransforms","standardEasing","VDialogTransition","name","props","target","Object","setup","slots","functions","onBeforeEnter","el","style","pointerEvents","visibility","onEnter","done","Promise","resolve","requestAnimationFrame","x","y","sx","sy","speed","getDimensions","animation","animate","transform","opacity","duration","easing","forEach","offset","finished","then","onAfterEnter","removeProperty","onBeforeLeave","onLeave","onAfterLeave","getChildren","els","querySelector","_el$querySelector","children","targetBox","getBoundingClientRect","elBox","originX","originY","getComputedStyle","transformOrigin","split","map","v","parseFloat","anchorSide","anchorOffset","getPropertyValue","offsetX","left","width","offsetY","top","height","tsx","tsy","maxs","Math","max","asa","window","innerWidth","innerHeight","min"],"sources":["../../../src/components/transitions/dialog-transition.tsx"],"sourcesContent":["import type { PropType } from 'vue'\nimport { Transition } from 'vue'\nimport { acceleratedEasing, deceleratedEasing, defineComponent, nullifyTransforms, standardEasing } from '@/util'\n\nexport const VDialogTransition = defineComponent({\n  name: 'VDialogTransition',\n\n  props: {\n    target: Object as PropType<HTMLElement>,\n  },\n\n  setup (props, { slots }) {\n    const functions = {\n      onBeforeEnter (el: Element) {\n        (el as HTMLElement).style.pointerEvents = 'none'\n        ;(el as HTMLElement).style.visibility = 'hidden'\n      },\n      async onEnter (el: Element, done: () => void) {\n        await new Promise(resolve => requestAnimationFrame(resolve))\n        await new Promise(resolve => requestAnimationFrame(resolve))\n        ;(el as HTMLElement).style.visibility = ''\n\n        const { x, y, sx, sy, speed } = getDimensions(props.target!, el as HTMLElement)\n\n        const animation = el.animate([\n          { transform: `translate(${x}px, ${y}px) scale(${sx}, ${sy})`, opacity: 0 },\n          { transform: '' },\n        ], {\n          duration: 225 * speed,\n          easing: deceleratedEasing,\n        })\n        getChildren(el)?.forEach(el => {\n          el.animate([\n            { opacity: 0 },\n            { opacity: 0, offset: 0.33 },\n            { opacity: 1 },\n          ], {\n            duration: 225 * 2 * speed,\n            easing: standardEasing,\n          })\n        })\n        animation.finished.then(() => done())\n      },\n      onAfterEnter (el: Element) {\n        (el as HTMLElement).style.removeProperty('pointer-events')\n      },\n      onBeforeLeave (el: Element) {\n        (el as HTMLElement).style.pointerEvents = 'none'\n      },\n      async onLeave (el: Element, done: () => void) {\n        await new Promise(resolve => requestAnimationFrame(resolve))\n\n        const { x, y, sx, sy, speed } = getDimensions(props.target!, el as HTMLElement)\n\n        const animation = el.animate([\n          { transform: '' },\n          { transform: `translate(${x}px, ${y}px) scale(${sx}, ${sy})`, opacity: 0 },\n        ], {\n          duration: 125 * speed,\n          easing: acceleratedEasing,\n        })\n        animation.finished.then(() => done())\n        getChildren(el)?.forEach(el => {\n          el.animate([\n            {},\n            { opacity: 0, offset: 0.2 },\n            { opacity: 0 },\n          ], {\n            duration: 125 * 2 * speed,\n            easing: standardEasing,\n          })\n        })\n      },\n      onAfterLeave (el: Element) {\n        (el as HTMLElement).style.removeProperty('pointer-events')\n      },\n    }\n\n    return () => {\n      return props.target\n        ? (\n          <Transition\n            name=\"dialog-transition\"\n            { ...functions }\n            css={ false }\n            v-slots={ slots }\n          />\n        )\n        : <Transition name=\"dialog-transition\" v-slots={ slots } />\n    }\n  },\n})\n\n/** Animatable children (card, sheet, list) */\nfunction getChildren (el: Element) {\n  const els = el.querySelector(':scope > .v-card, :scope > .v-sheet, :scope > .v-list')?.children\n  return els && [...els]\n}\n\nfunction getDimensions (target: HTMLElement, el: HTMLElement) {\n  const targetBox = target.getBoundingClientRect()\n  const elBox = nullifyTransforms(el)\n  const [originX, originY] = getComputedStyle(el).transformOrigin.split(' ').map(v => parseFloat(v))\n\n  const [anchorSide, anchorOffset] = getComputedStyle(el).getPropertyValue('--v-overlay-anchor-origin').split(' ')\n\n  let offsetX = targetBox.left + targetBox.width / 2\n  if (anchorSide === 'left' || anchorOffset === 'left') {\n    offsetX -= targetBox.width / 2\n  } else if (anchorSide === 'right' || anchorOffset === 'right') {\n    offsetX += targetBox.width / 2\n  }\n\n  let offsetY = targetBox.top + targetBox.height / 2\n  if (anchorSide === 'top' || anchorOffset === 'top') {\n    offsetY -= targetBox.height / 2\n  } else if (anchorSide === 'bottom' || anchorOffset === 'bottom') {\n    offsetY += targetBox.height / 2\n  }\n\n  const tsx = targetBox.width / elBox.width\n  const tsy = targetBox.height / elBox.height\n  const maxs = Math.max(1, tsx, tsy)\n  const sx = tsx / maxs\n  const sy = tsy / maxs\n\n  // Animate elements larger than 12% of the screen area up to 1.5x slower\n  const asa = (elBox.width * elBox.height) / (window.innerWidth * window.innerHeight)\n  const speed = asa > 0.12\n    ? Math.min(1.5, (asa - 0.12) * 10 + 1)\n    : 1\n\n  return {\n    x: offsetX - (originX + elBox.left),\n    y: offsetY - (originY + elBox.top),\n    sx,\n    sy,\n    speed,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}